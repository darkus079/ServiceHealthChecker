# ServiceHealthChecker

Веб-сервис для проверки доступности интернет-ресурсов.

## Запуск

```bash
go mod tidy
go run cmd/server/main.go
```

Сервер запустится на порту 8080.

## API

### POST /check

Проверка доступности ссылок.

**Запрос:**
```json
{
  "links": ["google.com", "yandex.ru"]
}
```

**Ответ:**
```json
{
  "links": {
    "google.com": "available",
    "yandex.ru": "available"
  },
  "links_num": 1
}
```

### POST /report

Получение PDF-отчёта по номерам наборов ссылок.

**Запрос:**
```json
{
  "links_list": [1, 2]
}
```

**Ответ:** PDF-файл с таблицей статусов.

## Используемые паттерны

### Repository Pattern

Слой `storage` инкапсулирует логику работы с данными. Это позволяет изолировать бизнес-логику от деталей хранения данных и упрощает тестирование.

### Service Layer

Слой `service` содержит бизнес-логику проверки доступности ресурсов. Разделение на слои обеспечивает чёткое распределение ответственности.

### Graceful Shutdown

При получении сигнала завершения сервер:
1. Устанавливает флаг `isShutdown`
2. Новые запросы сохраняются как pending-задачи для обработки после перезапуска
3. Ожидает завершения текущих запросов (таймаут 3 секунды)
4. Корректно завершает работу

### Персистентность задач

Незавершённые задачи сохраняются в файл `data/pending.json`. При следующем запуске сервер автоматически обрабатывает эти задачи.
